<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Class Planner</title>
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.snow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="header-with-nav">
            <div class="header-content">
                <div class="logo-section">
                    <h1>English Class Planner</h1>
                </div>
                
                <!-- Tab Navigation -->
                <nav class="tab-navigation-header">
                    <button class="tab-button active" onclick="switchTab('create')" data-tab="create">
                        ‚ûï Crear Clase
                    </button>
                    <button class="tab-button" onclick="switchTab('view')" data-tab="view">
                        üìö Ver Clases
                    </button>
                    <button class="tab-button" onclick="switchTab('settings')" data-tab="settings">
                        ‚öôÔ∏è Configuraci√≥n
                    </button>
                </nav>
            </div>
        </header>

        <!-- Create Class Tab -->
        <div id="createTab" class="tab-content active">
            <div class="card">
                <h2>üìù Nueva Clase</h2>
                <form id="classForm">
                    <div class="form-group">
                        <label for="classDate">Fecha de la Clase</label>
                        <input type="date" id="classDate" required>
                    </div>

                    <div class="form-group activities-section">
                        <label>Actividades de la Clase</label>
                        <div id="activitiesList">
                            <!-- Las actividades se generan din√°micamente -->
                        </div>
                        <button type="button" class="add-activity" onclick="addActivity()">+ Agregar Actividad</button>
                    </div>

                    <div class="form-group">
                        <label for="homework">Tarea (Homework)</label>
                        <textarea id="homework" placeholder="Ej: Make a question with each verb"></textarea>
                        
                        <!-- Homework Resources Section -->
                        <button type="button" class="add-resource-trigger homework-resources-trigger" onclick="toggleHomeworkResources()">
                            üìé Agregar recursos para la tarea
                        </button>
                        <div id="homeworkResourcesSection" class="resources-main-section">
                            <div class="resource-type-selector">
                                <button type="button" class="resource-type-btn active" onclick="toggleHomeworkResourceType(this, 'file')">
                                    üìé Subir archivo
                                </button>
                                <button type="button" class="resource-type-btn" onclick="toggleHomeworkResourceType(this, 'link')">
                                    üîó Agregar enlace
                                </button>
                            </div>
                            
                            <div class="file-upload-section">
                                <div class="file-upload-area" onclick="triggerHomeworkFileInput()">
                                    <input type="file" id="homeworkFileInput" class="file-input" accept=".pdf,.jpg,.jpeg,.png,.gif" multiple onchange="handleHomeworkFileSelect(this)">
                                    <div class="file-upload-text">üìé Subir archivos</div>
                                    <div class="file-upload-hint">Arrastra archivos aqu√≠ o haz clic para seleccionar<br>Soporta: PDF, JPG, PNG, GIF (m√°x. 10MB)</div>
                                </div>
                                <div id="homeworkUploadedFiles" class="uploaded-files"></div>
                            </div>
                            
                            <div class="link-upload-section" style="display: none;">
                                <div class="add-resource-section">
                                    <div class="resource-inputs">
                                        <input type="text" id="homeworkResourceName" placeholder="Nombre del recurso">
                                        <input type="url" id="homeworkResourceUrl" placeholder="https://...">
                                    </div>
                                    <button type="button" class="add-resource-btn" onclick="addHomeworkLinkResource()">üìé Agregar Enlace</button>
                                </div>
                                <div id="homeworkLinkResourcesList" class="link-resources-list"></div>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn">üíæ Guardar Clase</button>
                </form>
            </div>
        </div>

        <!-- View Classes Tab -->
        <div id="viewTab" class="tab-content">
            <div class="card">
                <div class="classes-header">
                    <h2>üìö Clases</h2>
                    <button id="expandAllBtn" class="expand-all-btn" onclick="toggleAllClasses()">
                        <span id="expandAllIcon">üìñ</span>
                        <span id="expandAllText">Expandir todas</span>
                    </button>
                </div>
                <input type="text" id="searchBox" class="search-box" placeholder="üîç Buscar en clases...">
                <div id="classesList" class="classes-grid">
                    <div class="empty-state">
                        <p>No tienes clases planificadas a√∫n.<br>¬°Crea tu primera clase de ingl√©s!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settingsTab" class="tab-content">
            <div class="card">
                <h2>‚öôÔ∏è Configuraci√≥n y Respaldos</h2>
                
                <div class="settings-section">
                    <h3>üìä Informaci√≥n de Almacenamiento</h3>
                    <div id="storageInfo" class="storage-info">
                        <div class="storage-stat">
                            <span class="stat-label">Clases guardadas:</span>
                            <span id="classCount" class="stat-value">0</span>
                        </div>
                        <div class="storage-stat">
                            <span class="stat-label">Archivos guardados:</span>
                            <span id="fileCount" class="stat-value">0</span>
                        </div>
                        <div class="storage-stat">
                            <span class="stat-label">Espacio usado:</span>
                            <span id="storageSize" class="stat-value">0 KB</span>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>üíæ Gesti√≥n de Datos</h3>
                    <div class="backup-controls">
                        <button class="btn btn-secondary" onclick="planner.exportData()">
                            üì• Exportar Datos
                        </button>
                        <div class="import-section">
                            <input type="file" id="importFile" accept=".json" style="display: none;" onchange="handleImport(this)">
                            <button class="btn btn-secondary" onclick="document.getElementById('importFile').click()">
                                üì§ Importar Datos
                            </button>
                        </div>
                        <button class="btn btn-danger" onclick="planner.clearAllData()">
                            üóëÔ∏è Eliminar Todo
                        </button>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>‚ÑπÔ∏è Acerca de</h3>
                    <div class="app-info">
                        <p><strong>English Class Planner v1.0</strong></p>
                        <p>Planificador de clases de ingl√©s con almacenamiento local persistente.</p>
                        <p>Los datos se guardan autom√°ticamente en tu navegador y permanecen disponibles entre sesiones.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Class Detail Modal -->
    <div id="classDetailModal" class="modal class-detail-modal">
        <div class="modal-content class-detail-content">
            <div class="modal-header">
                <h3 class="modal-title" id="classDetailTitle">Detalles de la Clase</h3>
                <button class="modal-close" onclick="closeClassDetailModal()">√ó</button>
            </div>
            <div class="modal-body" id="classDetailBody">
                <!-- Class detail content will be inserted here -->
            </div>
        </div>
    </div>

    <!-- File Preview Modal -->
    <div id="fileModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Vista previa</h3>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- File preview content will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Share Class Modal -->
    <div id="shareModal" class="share-modal">
        <div class="share-modal-content">
            <div class="share-modal-header">
                <h3 class="share-modal-title">Compartir Clase</h3>
            </div>
            <div class="share-modal-body">
                <div id="shareSuccess" class="share-success">
                    ‚úÖ Enlace copiado al portapapeles
                </div>
                
                <div class="share-options">
                    <div class="share-option" onclick="shareAsJson()">
                        <div class="share-option-icon">üìÑ</div>
                        <div class="share-option-content">
                            <div class="share-option-title">Descargar archivo</div>
                            <div class="share-option-description">Guardar la clase como archivo JSON</div>
                        </div>
                    </div>

                    <div class="share-option" onclick="exportClassWithFiles()">
                        <div class="share-option-icon">üìÅ</div>
                        <div class="share-option-content">
                            <div class="share-option-title">Exportar con archivos</div>
                            <div class="share-option-description">Descargar archivo HTML con todos los archivos incluidos</div>
                        </div>
                    </div>
                    
                    <div class="share-option" onclick="shareAsText()">
                        <div class="share-option-icon">üìù</div>
                        <div class="share-option-content">
                            <div class="share-option-title">Copiar como texto</div>
                            <div class="share-option-description">Copiar el contenido de la clase como texto plano</div>
                        </div>
                    </div>
                </div>
                
                <div class="share-actions">
                    <button class="btn btn-secondary" onclick="closeShareModal()">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.min.js"></script>
</body>
</html>